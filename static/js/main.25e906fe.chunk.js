(this["webpackJsonpstore-func"]=this["webpackJsonpstore-func"]||[]).push([[0],{27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(12),r=n.n(a),i=(n(27),n(10)),s=n(3),l=n(6),o="CHANGE_ITEM_FIELD",d="CLEAR_FIELDS",m="FETCH_SERVICES_REQUEST",u="FETCH_SERVICES_FAILURE",b="FETCH_SERVICES_SUCCESS",j="FETCH_SERVICES_DELETE",p="EDIT_SERVICES_REQUEST",h="EDIT_SERVICES_FAILURE",f="EDIT_SERVICES_SUCCESS",O="ADD_SERVICE_REQUEST",v="ADD_SERVICE_FAILURE",x="ADD_SERVICE_SUCCESS";function E(e,t){return{type:o,payload:{name:e,value:t}}}function y(){return{type:d,payload:{}}}var g=function(){return function(e){e({type:m}),fetch("https://api-redux-back.herokuapp.com/api/services",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(t){e({type:b,payload:{items:t}})})).catch((function(t){var n;e((n=t.message,{type:u,payload:{error:n}}))}))}},C=function(e){return function(t){t(function(e){return{type:j,payload:{delId:e}}}(e)),fetch("https://api-redux-back.herokuapp.com/api/services/".concat(e),{method:"DELETE"}),g()}},N=function(e){return function(t){t({type:p}),fetch("https://api-redux-back.herokuapp.com/api/services/".concat(e),{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){t({type:f,payload:{item:e}})})).catch((function(e){var n;t((n=e.message,{type:h,payload:{error:n}}))}))}},S=function(e,t,n,c){return function(a){a({type:O}),fetch("https://api-redux-back.herokuapp.com/api/services",{method:"POST",headers:new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),body:JSON.stringify({id:e||0,name:t,price:n,content:c})}).then((function(){a({type:x})})).catch((function(e){var t;a((t=e.message,{type:v,payload:{error:t}}))})),g()}},_=n(1);function I(){var e=Object(l.c)((function(e){return e.serviceField})),t=e.item,n=e.loading,c=e.error,a=Object(l.b)(),r=function(e){var t=e.target,n=t.name,c=t.value;a(E(n,c))};return Object(_.jsxs)("form",{className:"filling-form",onSubmit:function(e){e.preventDefault(),a(S(t.id,t.name,t.price,t.content)),a(y())},children:[Object(_.jsxs)("div",{className:"fields-group",children:[Object(_.jsxs)("div",{className:"mb-3 item-form",children:[Object(_.jsx)("label",{htmlFor:"item-field",className:"form-label",children:"Service"}),Object(_.jsx)("input",{type:"text",className:"form-control",id:"item-field",name:"name",onChange:r,value:t.name})]}),Object(_.jsxs)("div",{className:"mb-3 quantity-form",children:[Object(_.jsx)("label",{htmlFor:"quantity-field",className:"form-label",children:"Price"}),Object(_.jsx)("input",{type:"text",className:"form-control",id:"quantity-field",name:"price",onChange:r,value:t.price})]}),Object(_.jsxs)("div",{className:"mb-3 content-form",children:[Object(_.jsx)("label",{htmlFor:"content-field",className:"form-label",children:"Content"}),Object(_.jsx)("input",{type:"text",className:"form-control",id:"content-field",name:"content",onChange:r,value:t.content})]})]}),Object(_.jsx)("button",{type:"submit",className:"btn btn-success",disabled:n,children:"Apply"}),Object(_.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){a(y())},children:"Cancel"}),c&&Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445"})]})}function F(){var e=Object(l.c)((function(e){return e.serviceList})),t=e.items,n=e.loading,a=e.error,r=Object(l.b)();Object(c.useEffect)((function(){r(g())}),[r]);return n?Object(_.jsx)("div",{className:"spinner-border m-5",role:"status",children:Object(_.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):a?Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}):Object(_.jsx)("ul",{children:t.map((function(e){return Object(_.jsxs)("li",{className:"card",children:[Object(_.jsxs)("div",{className:"card-header",children:["Price: ",e.price]}),Object(_.jsxs)("div",{className:"card-body",children:[Object(_.jsxs)("p",{className:"card-text",children:["Service: ",e.name]}),Object(_.jsx)(i.b,{to:"/services/".concat(e.id),className:"btn btn-warning",children:"Edit"}),Object(_.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return t=e.id,void r(C(t));var t},children:"Delete"})]})]},e.id)}))})}function T(e){var t=e.match,n=Object(l.c)((function(e){return e.serviceEdit})),a=n.item,r=n.loading,o=n.error,d=Object(l.b)(),m=Object(s.f)(),u=function(e){var t=e.target,n=t.name,c=t.value;d(E(n,c))};return Object(c.useEffect)((function(){d(N(t.params.id))}),[d,t.params.id]),Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"Editing service item"}),Object(_.jsxs)("form",{className:"filling-form",children:[Object(_.jsxs)("div",{className:"fields-group",children:[Object(_.jsxs)("div",{className:"mb-3 item-form",children:[Object(_.jsx)("label",{htmlFor:"item-field",className:"form-label",children:"Service"}),Object(_.jsx)("input",{type:"text",className:"form-control",id:"item-field",name:"name",onChange:u,value:a.name})]}),Object(_.jsxs)("div",{className:"mb-3 quantity-form",children:[Object(_.jsx)("label",{htmlFor:"quantity-field",className:"form-label",children:"Price"}),Object(_.jsx)("input",{type:"text",className:"form-control",id:"quantity-field",name:"price",onChange:u,value:a.price})]}),Object(_.jsxs)("div",{className:"mb-3 content-form",children:[Object(_.jsx)("label",{htmlFor:"content-field",className:"form-label",children:"Content"}),Object(_.jsx)("input",{type:"text",className:"form-control",id:"content-field",name:"content",onChange:u,value:a.content})]})]}),Object(_.jsx)("button",{type:"submit",className:"btn btn-success",onClick:function(e){e.preventDefault(),d(S(a.id,a.name,a.price,a.content)),d(y()),m.push("/services")},disabled:r,children:"Apply"}),Object(_.jsx)(i.b,{to:"/services",className:"btn btn-secondary",children:"Cancel"}),o&&Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445"})]})]})}function D(){return Object(_.jsx)(i.a,{basename:"https://valerie-sidman.github.io/api-redux-front",children:Object(_.jsxs)("div",{className:"main-container",children:[Object(_.jsx)("h1",{className:"main-title",children:"Services list:"}),Object(_.jsxs)(s.c,{children:[Object(_.jsx)(s.a,{exact:!0,path:"/services",render:function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(I,{}),Object(_.jsx)(F,{})]})}}),Object(_.jsx)(s.a,{path:"/services/:id([0-9]+)?",component:T})]})]})})}var R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},A=n(7),L=n(2),k={items:[],loading:!1,error:null};var w=n(9),V={item:{id:"",name:"",price:"",content:""},loading:!1,error:null};var U={item:{id:"",name:"",price:"",content:""},loading:!1,error:null};var P=n(22),q=Object(A.c)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(L.a)(Object(L.a)({},e),{},{items:e.items,loading:!0,error:null});case u:var n=t.payload.error;return Object(L.a)(Object(L.a)({},e),{},{items:e.items,loading:!1,error:n});case b:var c=t.payload.items;return Object(L.a)(Object(L.a)({},e),{},{items:c,loading:!1,error:null});case j:var a=t.payload.delId,r=e.items.filter((function(e){return e.id!==a}));return Object(L.a)(Object(L.a)({},e),{},{items:r});default:return e}},serviceField:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n=t.payload,c=n.name,a=n.value,r=e.item;return Object(L.a)(Object(L.a)({},e),{},{item:Object(L.a)(Object(L.a)({},r),{},Object(w.a)({},c,a))});case O:return Object(L.a)(Object(L.a)({},e),{},{loading:!0,error:null});case v:var i=t.payload.error;return Object(L.a)(Object(L.a)({},e),{},{loading:!1,error:i});case x:return Object(L.a)({},V);case d:return V;default:return e}},serviceEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n=t.payload,c=n.name,a=n.value;return Object(L.a)(Object(L.a)({},e),{},{item:Object(L.a)(Object(L.a)({},e.item),{},Object(w.a)({},c,a))});case p:return Object(L.a)(Object(L.a)({},e),{},{item:e.item,loading:!0,error:null});case h:var r=t.payload.error;return Object(L.a)(Object(L.a)({},e),{},{items:e.items,loading:!1,error:r});case f:var i=t.payload.item;return Object(L.a)(Object(L.a)({},e),{},{item:i,loading:!1,error:null});case d:return U;default:return e}}}),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d,G=Object(A.e)(q,H(Object(A.a)(P.a)));r.a.render(Object(_.jsx)(l.a,{store:G,children:Object(_.jsx)(D,{})}),document.getElementById("root")),R()}},[[34,1,2]]]);
//# sourceMappingURL=main.25e906fe.chunk.js.map